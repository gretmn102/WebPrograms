var _Globals = {  };
var _DefaultGlobals = {  };
var _Objs = {  };
var _CurrentLocation = null;
var _StartedAt = Date.now();
var _TimerInterval = 500;
var _TimerObj = null;
var _LoadedGames = [];
var _Acts = {  };
var _StateStash = {  };
var _Playing = {  };
var _Locals = [];
var _MenuResume = null;
var _Games = [];
var _MainGame = null;
var _Locs = {  };
window.onload = _g1;
function _g1() { a_initDom(); _StartedAt = Date.now(); a_g2(_TimerInterval); var _g3 = Object.keys(_Games)[0]; a_initGlobals(_g3); a_g4(_g3); __PS_MV_REG = []; return; };
function _byId(_g5) { return document.getElementById(_g5); };

function a_g20(a_g21, a_g22) { return '<a class=\'qsp-act\' href=\'' + ('javascript:' + ('a_callAct' + '(\"' + a_g21 + '\");')) + '\' onmouseover=\'' + ('a_g6' + '(\"' + a_g21 + '\");') + '\'>' + (a_g22 ? '<img src=\'' + a_g22 + '\'>' : '') + a_g21 + '</a>'; };
function a_g23(a_g24, a_g21, a_g22, a_g25) { return '<a href=\'' + ('javascript:' + ('a_g7' + '(\"' + a_g25 + '\");')) + '\'>' + (a_g22 ? '<img src=\'' + a_g22 + '\'>' : '') + a_g21 + '</a>'; };
function a_g26(a_g21, a_g22, a_g27) { return '<li onclick=\'' + ('a_g8' + '(\"' + a_g21 + '\", \"' + a_g22 + '\");') + '\' class=\'qsp-obj' + (a_g27 ? ' selected' : '') + '\'>' + (a_g22 ? '<img src=\'' + a_g22 + '\'>' : '') + a_g21 + '</li>'; };
function a_g28() { return '<hr>'; };
function a_g29(a_g30) { return JSON.parse(JSON.stringify(a_g30)); };
function a_reportError(a_g31) { __PS_MV_REG = []; return alert(a_g31); };
function a_g32() { __PS_MV_REG = []; return _byId('qsp').classList.add('disable'); };
function a_g33() { __PS_MV_REG = []; return _byId('qsp').classList.remove('disable'); };
function sleep(a_g34) { __PS_MV_REG = []; return new Promise(function (a_g35) { a_g32(); var a_g36 = function () { a_g33(); __PS_MV_REG = []; return a_g35(); }; __PS_MV_REG = []; return setTimeout(a_g36, a_g34); }); };
function a_initDom() { var a_g37 = _byId('qsp-btn-save'); a_g37.onclick = a_savegame; a_g37.href = '#'; var btn9 = _byId('qsp-btn-open'); btn9.onclick = a_opengame; btn9.href = '#'; _byId('qsp-image-container').onclick = a_showImage; a_getFrame('input').a_g38 = a_g39; __PS_MV_REG = []; return window.onclick = function (a_g40) { window.a_g41 = [a_g40.pageX, a_g40.pageY]; __PS_MV_REG = []; return a_g7(null); }; };
function a_initGlobals(a_g42) { return Object.assign(_Globals, _DefaultGlobals[a_g42]); };
function a_callServLoc(a_g43) { var a_g44 = Array.prototype.slice.call(arguments, 1); var a_g45 = a_g46(a_g43, 0); if (a_g45) { var a_g25 = _Locs[a_g45.toUpperCase()]; __PS_MV_REG = []; return a_g25 ? a_callLoc(a_g45, a_g44) : null; }; };
function a_g47(a_g48) { var a_g42 = a_g48.match('(.*/)?([^.]+)(\\.[a-zA-Z]+)?')[2]; return _Games[a_g42]; };
function a_g4(a_g49) { var a_g50 = a_g47(a_g49); _MainGame = a_g49; _Locs = a_g50; __PS_MV_REG = []; return a_g50[Object.keys(a_g50)[0]]([]); };
function a_newline(a_g51) { __PS_MV_REG = []; return a_appendId(a_g52(a_g51), '<br>', true); };
function a_clearId(a_g53) { __PS_MV_REG = []; return _byId(a_g53).innerHTML = ''; };
function a_g54(a_g31) { return a_g31.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&apos;'); };
function a_prepareContents(a_g55, a_g56) { a_g55 = a_g55.toString(); __PS_MV_REG = []; return a_g56 || a_g46('USEHTML', 0) ? a_g55 : a_g54(a_g55); };
function a_getId(a_g53, a_g56) { __PS_MV_REG = []; return _byId(a_g53).innerHTML; };
function a_setId(a_g53, a_g57, a_g56) { __PS_MV_REG = []; return _byId(a_g53).innerHTML = a_prepareContents(a_g57, a_g56); };
function a_appendId(a_g53, a_g57, a_g56) { __PS_MV_REG = []; return a_g57 ? (_byId(a_g53).innerHTML += a_prepareContents(a_g57, a_g56)) : null; };
function a_g39(a_g58) { if (13 === a_g58.a_g59) { a_g58.a_g60(); __PS_MV_REG = []; return a_callServLoc('$USERCOM'); }; };
function a_g61(a_g44) { for (var a_g62 = 0; a_g62 < 10; a_g62 += 1) { a_g63('ARGS', a_g62, 0); a_g63('$ARGS', a_g62, ''); if (a_g44 && a_g62 < a_g44.length) { var a_g64 = a_g44[a_g62]; if (typeof a_g64 === 'number') { a_g63('ARGS', a_g62, a_g64); } else { a_g63('$ARGS', a_g62, a_g64); }; }; }; };
function a_getResult() { __PS_MV_REG = []; return a_g46('$RESULT', 0) || a_g46('RESULT', 0); };
function a_callLoc(a_g49, a_g44) { a_g49 = a_g49.toUpperCase(); a_pushLocalFrame(); try { a_g61(a_g44); _Locs[a_g49](); __PS_MV_REG = []; return a_getResult(); } finally { a_popLocalFrame(); }; };
function a_callAct(a_g21) { a_pushLocalFrame(); try { _Acts[a_g21]['act'](); } finally { a_popLocalFrame(); }; };
function a_g52(a_g51) { switch (a_g51) { case 'all': return 'qsp'; case 'main': return 'qsp-main'; case 'stat': return 'qsp-stat'; case 'objs': return 'qsp-objs'; case 'acts': return 'qsp-acts'; case 'input': return 'qsp-input'; case 'image': return 'qsp-image'; case 'dropdown': return 'qsp-dropdown'; default: __PS_MV_REG = []; return a_reportError('Internal error!'); }; };
function a_getFrame(a_g51) { __PS_MV_REG = []; return _byId(a_g52(a_g51)); };
function a_addText(a_g51, a_g31) { __PS_MV_REG = []; return a_appendId(a_g52(a_g51), a_g31); };
function a_getText(a_g51) { __PS_MV_REG = []; return a_getId(a_g52(a_g51)); };
function a_clearText(a_g51) { __PS_MV_REG = []; return a_clearId(a_g52(a_g51)); };
function a_enableFrame(a_g51, a_g65) { var a_g30 = a_getFrame(a_g51); a_g30.style.display = a_g65 ? 'block' : 'none'; };
function a_addAct(a_g21, a_g22, a_g66) { _Acts[a_g21] = { 'title' : a_g21, 'img' : a_g22, 'act' : a_g66, 'selected' : null }; __PS_MV_REG = []; return a_updateActs(); };
function a_delAct(a_g21) { delete _Acts[a_g21]; __PS_MV_REG = []; return a_updateActs(); };
function a_clearAct() { _Acts = {  }; __PS_MV_REG = []; return a_updateActs(); };
function a_updateActs() { a_clearId('qsp-acts'); var elt = _byId('qsp-acts'); for (var a_g21 in _Acts) { var a_g30 = _Acts[a_g21]; elt.innerHTML += a_g20(a_g21, a_g30['img']); }; };
function a_g6(a_g21) { for (var a_g67 in _Acts) { var a_g68 = _Acts[a_g67]; a_g68['selected'] = null; }; _Acts[a_g21]['selected'] = true; __PS_MV_REG = []; return a_callServLoc('$ONACTSEL'); };
function a_g69(a_g70) { var a_g71 = Array.prototype.slice.call(arguments, 1); var a_g68 = []; for (var a_g72 = null, _js_idx10 = 0; _js_idx10 < a_g71.length; _js_idx10 += 1) { a_g72 = a_g71[_js_idx10]; a_g68[a_g72] = '$' === a_g70[0] ? '' : 0; }; a_g68['indexes'] = {  }; __PS_MV_REG = []; return a_g68; };
function a_setStrElement(a_g70, a_g72, a_g73) { if (a_g70['indexes'].hasOwnProperty(a_g72)) { a_g70[a_g70['indexes'][a_g72]] = a_g73; } else { a_g70.push(a_g73); a_g70['indexes'][a_g72] = a_g70.length - 1; }; };
function a_setAnyElement(a_g70, a_g72, a_g73) { if (a_g72 == null) { a_g70.push(a_g73); } else if (typeof a_g72 === 'number') { a_g70[a_g72] = a_g73; } else if (typeof a_g72 === 'string') { a_setStrElement(a_g70, a_g72, a_g73); } else { a_reportError('INTERNAL ERROR'); }; };
function a_setServVar(a_g49, a_g72, a_g73) { var a_g70 = _Globals[a_g49]; a_setAnyElement(a_g70, a_g72, a_g73); a_g74[a_g49]['body'](a_g73, a_g72); };
function a_g75(a_g70, a_g72) { return typeof a_g72 === 'number' ? a_g70[a_g72] : a_g70[a_g70['indexes'][a_g72]]; };
function a_g63(a_g49, a_g72, a_g73) { __PS_MV_REG = []; return a_setAnyElement(_Globals[a_g49], a_g72, a_g73); };
function a_g46(a_g49, a_g72) { __PS_MV_REG = []; return a_g75(_Globals[a_g49], a_g72); };
function a_killVar(a_g49, a_g72) { if (a_g49) { a_g49 = a_g49.toUpperCase(); if (a_g72 && 0 !== a_g72) { _Globals[a_g49].a_kill(a_g72); } else { _Globals[a_g49] = []; _Globals[a_g49]['indexes'] = {  }; }; } else { _Globals = {  }; a_initGlobals(_MainGame); }; };
function a_arraySize(a_g49) { __PS_MV_REG = []; return a_varRef(a_g49)['values'].length; };
function a_pushLocalFrame() { _Locals.push({  }); };
function a_popLocalFrame() { _Locals.pop(); };
function a_currentLocalFrame() { return _Locals[_Locals.length - 1]; };
function a_g8(a_g21, a_g22) { for (var a_g67 in _Objs) { var a_g68 = _Objs[a_g67]; a_g68['selected'] = null; }; _Objs[a_g21]['selected'] = true; __PS_MV_REG = []; return a_callServLoc('$ONOBJSEL', a_g21, a_g22); };
function a_updateObjs() { a_clearId('qsp-objs'); var elt = _byId('qsp-objs'); for (var a_g49 in _Objs) { var a_g30 = _Objs[a_g49]; elt.innerHTML += a_g26(a_g49, a_g30['img'], a_g30['selected']); }; };
function a_g76(a_g77) { var elt = a_getFrame('dropdown'); var a_g62 = 0; var _js12 = a_g77.length; for (var _js11 = 0; _js11 < _js12; _js11 += 1) { var a_g78 = a_g77[_js11]; ++a_g62; elt.innerHTML += a_g78 === 'delimiter' ? a_g28(a_g62) : a_g23(a_g62, a_g78['text'], a_g78['icon'], a_g78['loc']); }; var mouse13 = window.a_g41; elt.style.left = mouse13[0] + 'px'; elt.style.top = mouse13[1] + 'px'; if (document.body.a_g79 > mouse13[0] + elt.a_g79) { elt.style.left += elt.a_g79; }; if (document.body.a_g80 > mouse13[0] + elt.a_g80) { elt.style.top += elt.a_g80; }; __PS_MV_REG = []; return elt.style.display = 'block'; };
function a_g7(a_g25) { if (_MenuResume) { var elt = a_getFrame('dropdown'); elt.innerHTML = ''; elt.style.display = 'none'; _MenuResume(); _MenuResume = null; if (a_g25) { a_callLoc(a_g25); }; }; };
function a_menu(a_g77) { new Promise(function (a_g35) { a_g32(); var a_g36 = function () { a_g33(); __PS_MV_REG = []; return a_g35(); }; a_g76(a_g77); __PS_MV_REG = []; return _MenuResume = a_g36; }); };
function a_cleanAudio() { var _js14 = Object.keys(_Playing); var _js16 = _js14.length; for (var _js15 = 0; _js15 < _js16; _js15 += 1) { var a_g67 = _js14[_js15]; var a_g68 = _Playing[a_g67]; if (a_g68.a_g81) { delete _Playing.a_g67; }; }; };
function a_showImage(a_g82) { var a_g22 = a_getFrame('image'); if (a_g82) { a_g22.src = a_g82; __PS_MV_REG = []; return a_g22.style.display = 'flex'; } else { a_g22.src = ''; __PS_MV_REG = []; return a_g22.style.display = 'hidden'; }; };
function a_g83(a_g84) { var a_g85 = a_g84 >> 16; var a_g86 = a_g84 >> 8 & 255; var a_g87 = a_g84 & 255; var a_g88 = function (a_g89) { var a_g90 = Number(a_g89).toString(16); __PS_MV_REG = []; return a_g90.length < 2 ? '0' + a_g90 : a_g90; }; __PS_MV_REG = []; return '#' + a_g88(a_g85) + a_g88(a_g86) + a_g88(a_g87); };
function a_g91(a_g51, a_g30) { a_g92(a_g51, btoa(encodeURIComponent(JSON.stringify(a_g30)))); };
function a_g92(a_g51, a_g93) { localStorage.setItem('qsp_' + a_g51, a_g93); };
function a_g94(a_g51) { __PS_MV_REG = []; return JSON.parse(encodeURIComponent(atob(a_g95(a_g51)))); };
function a_g95(a_g51) { return localStorage.getItem('qsp_' + a_g51); };
function a_g96(a_g70, a_g97) { var a_g98 = a_g94('saves'); a_g98.a_g70 = a_g97; a_g91(a_g98); a_g92(a_g70, a_g99()); };
function a_g100(a_g70) { a_g101(a_g95(a_g70)); };
function a_g102(a_g70) { var a_g98 = a_g94('saves'); a_g98.a_g70 = undefined; a_g91(a_g98); a_g92(a_g70, undefined); };
function a_g103() { __PS_MV_REG = []; return a_g94('saves'); };
function a_opengame() { var a_g104 = document.createElement('input'); a_g104.setAttribute('type', 'file'); a_g104.setAttribute('id', 'qsp-opengame'); a_g104.setAttribute('tabindex', -1); a_g104.setAttribute('aria-hidden', true); a_g104.style.display = 'block'; a_g104.style.a_g105 = 'hidden'; a_g104.style.position = 'fixed'; a_g104.onchange = function (a_g40) { var a_g106 = a_g40.target.files[0]; var a_g107 = new FileReader(); a_g107.onload = function (a_g58) { var target = a_g58.currentTarget; if (!target.result) { return null; }; a_g101(target.result); __PS_MV_REG = []; return a_g108(); }; __PS_MV_REG = []; return a_g107.readAsText(a_g106); }; document.body.appendChild(a_g104); a_g104.click(); return document.body.removeChild(a_g104); };
function a_savegame() { var a_g104 = document.createElement('a'); a_g104.setAttribute('href', 'data:text/plain;charset=utf-8,' + a_g99()); a_g104.setAttribute('download', 'savegame.sav'); a_g104.style.display = 'none'; document.body.appendChild(a_g104); a_g104.click(); __PS_MV_REG = []; return document.body.removeChild(a_g104); };
function a_stashState(a_g44) { a_callServLoc('$ONGSAVE'); _StateStash = JSON.stringify({ 'vars' : _Globals, 'objs' : _Objs, 'loc-args' : a_g44, 'msecs' : Date.now() - _StartedAt, 'timer-interval' : _TimerInterval, 'main-html' : a_getFrame('main').innerHTML, 'stat-html' : a_getFrame('stat').innerHTML, 'next-location' : _CurrentLocation }); };
function a_g108() { var a_g109 = JSON.parse(_StateStash); a_clearAct(); _Globals = a_g109['vars']; var _js17 = Object.keys(_Globals); var _js19 = _js17.length; for (var _js18 = 0; _js18 < _js19; _js18 += 1) { var a_g67 = _js17[_js18]; Object.setPrototypeOf(_Globals[a_g67], a_Var.prototype); }; _StartedAt = Date.now() - a_g109['msecs']; _Objs = a_g109['objs']; _CurrentLocation = a_g109['next-location']; a_getFrame('main').innerHTML = a_g109['main-html']; a_getFrame('stat').innerHTML = a_g109['stat-html']; a_updateObjs(); a_g2(a_g109['timer-interval']); a_callServLoc('$ONGLOAD'); a_callLoc(_CurrentLocation, a_g109['loc-args']); };
function a_g99() { __PS_MV_REG = []; return btoa(encodeURIComponent(_StateStash)); };
function a_g101(a_g109) { __PS_MV_REG = []; return _StateStash = decodeURIComponent(atob(a_g109)); };
function a_g2(a_g110) { _TimerInterval = a_g110; clearInterval(_TimerObj); __PS_MV_REG = []; return _TimerObj = setInterval(function () { __PS_MV_REG = []; return a_callServLoc('$COUNTER'); }, a_g110); };
if ('undefined' === typeof a_g74) { var a_g74 = {  }; };
a_g74['$BACKIMAGE'] = { 'name' : '$BACKIMAGE', 'body' : function (a_g82) { __PS_MV_REG = []; return a_getFrame('main').style.backgroundImage = a_g82; } };
a_g74['BCOLOR'] = { 'name' : 'BCOLOR', 'body' : function (color) { __PS_MV_REG = []; return a_getFrame('all').style.backgroundColor = a_g83(color); } };
a_g74['FCOLOR'] = { 'name' : 'FCOLOR', 'body' : function (color) { __PS_MV_REG = []; return a_getFrame('all').style.color = a_g83(color); } };
a_g74['LCOLOR'] = { 'name' : 'LCOLOR', 'body' : function (color) { __PS_MV_REG = []; return a_getFrame('style').innerText = 'a { color: ' + a_g83(color) + ';}'; } };
a_g74['FSIZE'] = { 'name' : 'FSIZE', 'body' : function (size) { __PS_MV_REG = []; return a_getFrame('all').style.fontSize = size; } };
a_g74['$FNAME'] = { 'name' : '$FNAME', 'body' : function (fontName) { __PS_MV_REG = []; return a_getFrame('all').style.fontFamily = fontName + ',serif'; } };

function l_goto(target, l_g124) { a_clearText('main'); l_xgoto(target, l_g124); };
function l_xgoto(target, l_g124) { l_g124 = l_g124 || []; a_clearAct(); _CurrentLocation = target.toUpperCase(); a_stashState(l_g124); a_callLoc(_CurrentLocation, l_g124); a_callServLoc('$ONNEWLOC'); };
function l_obj(l_g125) { return _Objs.hasOwnProperty(l_g125); };
function l_loc(l_g125) { return _Locs.hasOwnProperty(l_g125); };
function l_rand(l_g126, l_g127) { if (l_g127 === undefined) { l_g127 = 1; }; var min111 = Math.min(l_g126, l_g127); var max112 = Math.max(l_g126, l_g127); __PS_MV_REG = []; return min111 + l_g128.random(max112 - min111); };
function l_copyarr(l_g129, l_g130, l_g131, count) { __PS_MV_REG = []; var l_g132 = a_varRealName(l_g129); var l_g133 = __PS_MV_REG[0]; __PS_MV_REG = []; var l_g134 = a_varRealName(l_g130); var l_g135 = __PS_MV_REG[0]; var _js113 = Math.min(a_arraySize(l_g134), l_g131 + count); for (var l_g136 = l_g131; l_g136 <= _js113; l_g136 += 1) { a_setVar(l_g132, l_g131 + l_g136, l_g133, a_getVar(l_g134, l_g131 + l_g136, l_g135)); }; };
function l_arrpos(l_g125, l_g137, l_g131) { if (l_g131 === undefined) { l_g131 = 0; }; __PS_MV_REG = []; var l_g138 = a_varRealName(l_g125); var l_g139 = __PS_MV_REG[0]; var _js114 = a_arraySize(l_g125); for (var l_g136 = l_g131; l_g136 <= _js114; l_g136 += 1) { if (a_getVar(l_g138, l_g136, l_g139) === l_g137) { __PS_MV_REG = []; return l_g136; }; }; __PS_MV_REG = []; return -1; };
function l_arrcomp(l_g125, l_g140, l_g131) { if (l_g131 === undefined) { l_g131 = 0; }; __PS_MV_REG = []; var l_g138 = a_varRealName(l_g125); var l_g139 = __PS_MV_REG[0]; var _js115 = a_arraySize(l_g125); for (var l_g136 = l_g131; l_g136 <= _js115; l_g136 += 1) { if (a_getVar(l_g138, l_g136, l_g139).match(l_g140)) { __PS_MV_REG = []; return l_g136; }; }; __PS_MV_REG = []; return -1; };
function l_instr(l_g141, l_g142, l_g131) { if (l_g131 === undefined) { l_g131 = 1; }; return l_g131 + l_g141.l_g143(l_g131 - 1).search(l_g142); };
function l_isnum(l_g141) { __PS_MV_REG = []; return l_g144(l_g141) ? 0 : -1; };
function l_strcomp(l_g141, l_g140) { return l_g141.match(l_g140) ? -1 : 0; };
function l_strfind(l_g141, l_g140, l_g145) { var l_g146 = new l_g147(l_g140); var match = l_g146.l_exec(l_g141); __PS_MV_REG = []; return match.l_g145(l_g145); };
function l_strpos(l_g141, l_g140, l_g145) { if (l_g145 === undefined) { l_g145 = 0; }; var l_g146 = new l_g147(l_g140); var match = l_g146.l_exec(l_g141); var l_g148 = match.l_g145(l_g145); __PS_MV_REG = []; return l_g148 ? l_g141.search(l_g148) : 0; };
function l_iif(l_g149, l_g150, l_g151) { return l_g149 ? l_g150 : l_g151; };
function l_gosub(target) { var l_g124 = Array.prototype.slice.call(arguments, 1); a_callLoc(target, l_g124); };
function l_func(target) { var l_g124 = Array.prototype.slice.call(arguments, 1); __PS_MV_REG = []; return a_callLoc(target, l_g124); };
function l_dynamic(block) { var l_g124 = Array.prototype.slice.call(arguments, 1); if (typeof block === 'string') { a_reportError('DYNAMIC can\'t evaluate arbitrary strings.\\nUse {braces} to create blocks for DYNAMIC.'); }; a_g61(l_g124); __PS_MV_REG = []; return block(); };
function l_dyneval(block) { var l_g124 = Array.prototype.slice.call(arguments, 1); if (typeof block === 'string') { a_reportError('DYNEVAL can\'t evaluate arbitrary strings.\\nUse {braces} to create blocks for DYNEVAL.'); }; a_g61(l_g124); block(); __PS_MV_REG = []; return a_getResult(); };
function l_mainP(l_g141) { a_addText('main', l_g141); };
function l_mainPl(l_g141) { a_addText('main', l_g141); a_newline('main'); };
function l_mainNl(l_g141) { a_newline('main'); a_addText('main', l_g141); };
function l_maintxt() { __PS_MV_REG = []; return a_getText('main'); };
function l_desc() { return ''; };
function l_mainClear() { a_clearText('main'); };
function l_statP(l_g141) { a_addText('stat', l_g141); };
function l_statPl(l_g141) { a_addText('stat', l_g141); a_newline('stat'); };
function l_statNl(l_g141) { a_newline('stat'); a_addText('stat', l_g141); };
function l_stattxt() { __PS_MV_REG = []; return a_getText('stat'); };
function l_statClear() { a_clearText('stat'); };
function l_cls() { l_statClear(); l_mainClear(); a_clearAct(); l_cmdclear(); };
function l_g152() { for (var l_g153 in _Acts) { var l_g154 = _Acts[l_g153]; if (l_g154['selected']) { return l_g154['name']; }; }; };
function l_curacts() { var l_g155 = Object.assign({  }, _Acts); return function () { _Acts = l_g155; a_updateActs(); }; };
function l_addobj(l_g125, l_g156) { l_g156 = l_g156 || ''; _Objs[l_g125] = { 'name' : l_g125, 'img' : l_g156, 'selected' : null }; a_updateObjs(); a_callServLoc('$ONOBJADD', l_g125, l_g156); };
function l_delobj(l_g125) { delete _Objs[l_g125]; a_updateObjs(); a_callServLoc('$ONOBJDEL', l_g125); };
function l_killobj(l_g157) { if (undefined === l_g157) { _Objs = {  }; } else { l_delobj(Object.keys(_Objs)[l_g157]); }; a_updateObjs(); };
function l_g158() { for (var l_g153 in _Objs) { var l_g154 = _Objs[l_g153]; if (l_g154['selected']) { return l_g154['name']; }; }; };
function l_g159() { for (var l_g153 in _Objs) { var l_g154 = _Objs[l_g153]; l_g154['selected'] = null; }; };
function l_menu(l_g160) { var l_g161 = []; var _js116 = a_getArray(a_varRealName(l_g160)).values; var _js118 = _js116.length; for (var _js117 = 0; _js117 < _js118; _js117 += 1) { var l_g162 = _js116[_js117]; var l_g163 = l_g162['str']; if (l_g163 === '') { break; } else if (l_g163 === '-:-') { l_g161.push('delimiter'); } else { var l_g164 = l_g163.split(':'); if (l_g164.length === 2) { l_g164.push(''); }; var l_g165 = l_g164.splice(0, l_g164.length - 2).join(':'); var l_loc = l_g164[l_g164.length - 2]; var l_g166 = l_g164[l_g164.length - 1]; l_g161.push({ 'text' : l_g165, 'loc' : l_loc, 'icon' : l_g166 }); }; }; a_menu(l_g161); };
function l_play(l_g167, l_g168) { if (l_g168 === undefined) { l_g168 = 100; }; var l_g169 = new l_g170(l_g167); _Playing[l_g167] = l_g169; l_g169.l_g168 = l_g168 * 0.01; __PS_MV_REG = []; return l_g169.l_play(); };
function close(l_g167) { _Playing[l_g167](l_g171); delete _Playing[l_g167]; };
function l_closeall() { var _js119 = Object.keys(_Playing); var _js121 = _js119.length; for (var _js120 = 0; _js120 < _js121; _js120 += 1) { var l_g153 = _js119[_js120]; var l_g154 = _Playing[l_g153]; l_g154(l_g171); }; return _Playing = {  }; };
function l_refint() { return null; };
function l_usertxt() { var l_input = _byId('qsp-input'); __PS_MV_REG = []; return l_input.l_g137; };
function l_cmdclear() { var l_input = _byId('qsp-input'); __PS_MV_REG = []; return l_input.l_g137 = ''; };
function l_input(l_g165) { return window.prompt(l_g165); };
function l_msecscount() { return Date.now() - _StartedAt; };
function l_rgb(l_g172, l_g173, l_g174) { return (l_g172 << 16) + (l_g173 << 8) + l_g174; };
function l_openqst(l_g125) { __PS_MV_REG = []; return a_g4(l_g125); };
function l_addqst(l_g125) { var l_game = a_g47(l_g125); __PS_MV_REG = []; return Object.assign(_Locs, _Games[l_g125]); };
function l_killqst() { var _js123 = _Games.length; for (var _js122 = 0; _js122 < _js123; _js122 += 1) { var _db124 = _Games[_js122]; var l_g153 = _db124[0]; var l_g154 = _db124[1]; if (l_g153 !== _MainGame) { delete _Locs[l_g153]; }; }; };

_Games['game'] = {  };
_DefaultGlobals['game'] = { 'I' : a_g69('I', 0), '$NEEDLE' : a_g69('$NEEDLE', 0), 'ANCIENT' : a_g69('ANCIENT', 0), '$WINDOW' : a_g69('$WINDOW'), 'USEHTML' : a_g69('USEHTML', 0), 'ARGS' : a_g69('ARGS', 0), '$ARGS' : a_g69('$ARGS', 0), 'RESULT' : a_g69('RESULT', 0), '$RESULT' : a_g69('$RESULT', 0), '$ONGLOAD' : a_g69('$ONGLOAD', 0), '$ONGSAVE' : a_g69('$ONGSAVE', 0), '$ONOBJADD' : a_g69('$ONOBJADD', 0), '$ONOBJDEL' : a_g69('$ONOBJDEL', 0), '$ONOBJSEL' : a_g69('$ONOBJSEL', 0), '$ONNEWLOC' : a_g69('$ONNEWLOC', 0), '$ONACTSEL' : a_g69('$ONACTSEL', 0), '$COUNTER' : a_g69('$COUNTER', 0), '$USERCOM' : a_g69('$USERCOM', 0) };
_Games['game']['0'] = async function (l_g124) { _Globals['USEHTML'][0] = -1; _Globals['$ONOBJSEL'][0] = 'onobjsel'; l_mainPl('<h1>Художница</h1>'); l_mainPl('История про одну простую девушку, скажем, Марью, которая однажды взглянула на мир по-другому и пыталась к этому привыкнуть.'); l_mainPl(''); l_mainPl(''); l_mainPl('<center>v0.1a, DEMO!!!</center>'); a_addAct('Начать', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('начало начал'); __PS_MV_REG = []; return; }); a_addAct('История изменений', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('changelog'); __PS_MV_REG = []; return; }); __PS_MV_REG = []; return; };
_Games['game']['CHANGELOG'] = async function (l_g124) { l_mainPl('<h1>История изменений</h1>'); l_mainPl('<h2>0.1a</h2>'); l_mainPl('asdf'); l_mainPl('fg'); l_mainPl('<ul>\n      <li>Демка, че с нее еще взять?</li>\n    </ul>'); a_addAct('Назад', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('0'); __PS_MV_REG = []; return; }); };
_Games['game']['ONOBJSEL'] = async function (l_g124) { a_setStrElement(_Globals['$WINDOW'], 'maintxt', l_maintxt()); a_setStrElement(_Globals['$WINDOW'], 'stattxt', l_stattxt()); a_setStrElement(_Globals['$WINDOW'], 'acts', l_curacts()); l_cls(); if (l_g158() === 'Мечта') { l_mainPl('Мечта, грезы, ну а для строгих людей — художественные навыки.'); } else if (l_g158() === 'Явь') { l_mainPl('Настоящий мир, в котором пребывает бренное тело.'); }; a_addAct('Назад', '', async function (l_g124) { l_mainClear(); l_mainP(_Globals['$WINDOW'][_Globals['$WINDOW']['indexes']['maintxt']]); l_statClear(); l_statP(_Globals['$WINDOW'][_Globals['$WINDOW']['indexes']['stattxt']]); a_clearAct(); l_dynamic(_Globals['$WINDOW'][_Globals['$WINDOW']['indexes']['acts']]); a_killVar('$window', null); }); l_g159(); };
_Games['game']['КОНЕЦ ДЕМОВЕРСИИ'] = async function (l_g124) { l_mainPl('Марья балансировала на грани рутины и мечты, и быть может, из этого что-то бы получалось, а может, бросила бы мечту и посвятила целиком труду, а может, слишком сильно увлеклась искусством, зима застала врасплох, и прибрала к рукам неосторожную мечтательницу. У матери непременно бы раскрылась какая-то тайна, быть может, ее тоже посвящали подобные озарения, но к несчастью, обрывались тяжелой жизнью. Там еще скарб почившего отца мелькает на задворках закулисья аки ружье Чехова...'); l_mainPl('И все это \"бы\", если бы не Малишка, Дракон и девица с труднопроизносимым именем не давили бы на автора. Но этим персонажам он еще <s>отомстит</s> посвятит не одну главу будущих недоделок, но это уже другая история. Все равно им благодарен, что помогли начать.'); a_addAct('Можно, кстати, сразиться за карандаши, так, забавы ради', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('битва за карандаши'); __PS_MV_REG = []; return; }); };
_Games['game']['НАЧАЛО НАЧАЛ'] = async function (l_g124) { l_mainPl('Где-то в далекой глуши, в одной деревеньке жила-была девушка Марья. Жила она непримечательной жизнью, самозабвенно трудилась на поле, помогала матушке, чем могла, да и горя-то не знала. Пока однажды одним унылым дождливым вечером не пришло озарение.'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('loc1'); __PS_MV_REG = []; return; }); };
_Games['game']['LOC1'] = async function (l_g124) { l_mainPl('Свеча тускло освещала комнату. Марья сидела у окна и грустно разглядывала свое отражение, пока дождь стучался по стеклу. \"Впустить, что ли?\", — лениво подумала она, но и эта мысль ни капли не пошатнула уныние. Тогда решила она пририсовать улыбку прямо на стекле — пусть хоть так ее можно одолеть. Она небрежно провела кривую, потом еще раз... Штрих за штрихом воссоздавали картину мира, пусть и наивную и простую, но в ту минуту Марья окунулась в волшебство созидания. Рисовала она то ли наяву, то ли во сне, и лишь утром явь напомнила о себе: спина напрочь затекла, от свечи остался огарок, а вместе с ней — серьезный разговор с матушкой.'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('loc2'); __PS_MV_REG = []; return; }); };
_Games['game']['LOC2'] = async function (l_g124) { l_mainPl('Что ж, матушка отнеслась с пониманием, но предупредила, что свечей осталось мало, и нужно беречь. Пришлось согласиться.'); l_mainPl(''); l_mainPl('День прошел в рутине, а о странном наваждении Марья вспомнила лишь под вечер.'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('loc3'); __PS_MV_REG = []; return; }); };
_Games['game']['LOC3'] = async function (l_g124) { l_mainPl('Конечно, она знала про искусство, ведь всё в округе было пронизано им: глиняные кувшины, деревянные ложки, да даже обшарпанные стены могли похвастать росписью перед пытливым взором. Но все это раньше Марье казалось само собой разумеющимся, будто иначе и не могло быть. Это лишь часть мира, часть сущего. Но в тот дождливый вечер необычное будто сбросило оковы быта и предстало перед ней во всем своем великолепии.'); l_mainPl('Сейчас она с упоением разглядывала узоры и восхищалась работами неизвестных мастеров. Ей хотелось повторить, даже дополнить, как бы это дерзко не казалось. В воображении она повторяла узоры, только наяву ничего не оставалась, как бы сильно не старалась. Глупая затея, ясно же. Нужны инструменты, только какие? Кисти? О чем-то таком она уже слышала. Возможно, это куда удобнее, чем пальцем рисовать. Она взглянула на окно — на стекле уже давно исчезли вчерашние шалости. Нужно что-то надежное, вечное. Краски? Где бы их взять...'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('loc4'); __PS_MV_REG = []; return; }); };
_Games['game']['LOC4'] = async function (l_g124) { l_mainPl('Из наваждения ее вырвала матушка. Марья выронила ложку, будто ее застали за чем-то плохим, а все попытки взять себя в руки только усилили это чувство. Матушка неодобрительно цокнула:'); l_mainPl('— Ложись спать, хватит свечи переводить понапрасну, — и исчезла в темноте. Да, она безусловно права. Нужна холодная рассудительность и расчетливость, а всё остальное — лишь праздные мысли, пустые мечтания... Но как же хочется хоть раз попробовать! От этого ведь никто не умирал... наверное. И все же страшно делиться с матерью переживанием, как бы сильно не хотелось. Она лишь спугнет этот огонек, и жизнь опять поблекнет. Ей стало настолько душно от этой мысли, что она расстегнула воротник. Она сама во всем разберется, не девочка уже, в покровительстве не нуждается. Но всё завтра, только завтра, ведь утро вечером мудренее, и стоит к этому прислушаться.'); l_addobj('Мечта', 'https://discord.com/assets/fccc6b7583e67ffbe59b5ff17bb220f3.svg'); l_addobj('Явь', 'https://discord.com/assets/6c8c8654d649bee316b88e2342b6c8fa.svg'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('время действовать'); __PS_MV_REG = []; return; }); };
_Games['game']['ADDCHARCOAL'] = async function (l_g124) { l_addobj('Уголек', 'https://vignette.wikia.nocookie.net/play-rust/images/a/ad/Charcoal_icon.png/revision/latest?cb=20151106061556'); };
_Games['game']['ВРЕМЯ ДЕЙСТВОВАТЬ'] = async function (l_g124) { l_mainPl('Настал новый день, и вместе с ним пришла решимость. Только с чего бы начать?'); l_mainPl('Сейчас сезон грибов, и можно (да и нужно) сходить за ними. Отчего-то взгляд упал на уголек, надо бы и его с собой прихватить, так, на всякий случай.'); l_gosub('addCharcoal'); a_addAct('В лес за грибами', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('за грибами'); __PS_MV_REG = []; return; }); };
_Games['game']['НАГОНЯЙ'] = async function (l_g124) { l_mainPl('После хорошенького нагоняя...'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('дом'); __PS_MV_REG = []; return; }); };
_Games['game']['ДОМ'] = async function (l_g124) { l_mainPl('Вечер, ночь, утро...'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('время действовать'); __PS_MV_REG = []; return; }); if (_Globals['ANCIENT'][0] === 2) { l_mainPl(''); l_mainPl('Извините, но историй больше нет'); a_addAct('конец демоверсии', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('конец демоверсии'); __PS_MV_REG = []; return; }); }; };
_Games['game']['ГРИБНОЙ КОНЕЦ'] = async function (l_g124) { l_mainPl('Однажды она проснулась и поняла, что в грибном деле тоже есть своя прелесть.'); l_mainPl('А искусство? Пустые грезы и только! Давно пора было повзрослеть. В конце концов, всегда можно вернуться к мечте в любое время. Это лишь легкий перерыв, и только.'); l_mainPl('Она с толикой грусти взглянула на потрепанный карандаш и упрятала его вглубь ящика... навсегда.'); l_mainPl('Марья стала грибным магнатом, как бы это забавно не звучало. Дела действительно шли неплохо, по крайней мере, лишений она не знала. Возможно, в будущем у нее объявился какой-нибудь Иннокентий, с которым она связала свою жизнь, а может, как говорится, навеки обручилась со своей работой. Ее мечта осталась на дне ящика, быть может, это даже к лучшему.'); l_mainPl('Достигнута 1 концовка из {?}'); };
_Games['game']['GETOBJBYKEY'] = async function (l_g124) { var l_g175 = []; l_g175['_nil'] = async function () { _Globals['$NEEDLE'][0] = _Globals['$ARGS'][0]; _Globals['I'][0] = 1; return 'LAB'; }; l_g175['LAB'] = async function () { while (true) { if (_Globals['I'][0] <= _Objs.length) { if ((_Objs[_Globals['I'][0]] || '') === _Globals['$NEEDLE'][0]) { _Globals['RESULT'][0] = _Globals['I'][0]; return; } else { _Globals['I'][0] += 1; continue; }; }; _Globals['RESULT'][0] = -1; break; }; }; for (var l_g176 = '_nil'; l_g176; l_g176 = await (l_g175[l_g176]())) { }; };
_Games['game']['ДРЕВНИЕ РУИНЫ'] = async function (l_g124) { _Globals['ANCIENT'][0] = 2; l_mainPl('Марья блуждала по лесу и забрела на неизвестную тропу. Сложно было устоять, когда она сама манила на встречу к приключениям. Марья пошла по тропинке, пока не набрела на древние руины — так она их сразу нарекла. Быть может, это были самые обыкновенные камни, но она видела в них древние изваяния. Самое то, чтобы запечатлеть картину.'); _Globals['I'][0] = l_func('getObjByKey', 'Уголек'); if (_Globals['I'][0] === -1) { l_mainPl('Только, увы (а может, к счастью?), нечем. Пришлось собрать грибы и отправиться домой.'); a_addAct('Домой', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('дом'); __PS_MV_REG = []; return; }); } else { a_addAct('Нарисовать', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_mainPl('TODO'); l_delobj('Уголек'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('нагоняй'); __PS_MV_REG = []; return; }); }); a_addAct('Собрать грибы и отправиться домой', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('дом'); __PS_MV_REG = []; return; }); }; };
_Games['game']['ЧЕМ МОЖНО ЗАНИМАТЬСЯ?'] = async function (l_g124) { };
_Games['game']['ЗА ГРИБАМИ'] = async function (l_g124) { l_mainPl('Природа восхищала своими красками, а воображение рисовало причудливые картины: битва с медведем; человек, бегущий от кабана; обычный день в племени человекообразных грибов и прочие разнузданные сюжеты. Может, зарисовать, что-нибудь? Благо, угольки с собой, а неподалеку — плоский камушек. А с другой стороны, нужно грибы собирать, иначе есть нечего будет.'); if (_Globals['I'][0] === -1) { l_mainPl('Только, увы (а может, к счастью?), нечем.'); } else { a_addAct('Сесть и зарисовать', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_delobj('Уголек'); l_mainPl('Взяла плоский камушек, нашла пенек поудобнее и погрузилась в дивный мир. Время шло, грибы наивно ждали часа своего. Видимо, в этот раз судьбоносная длань, что была предсказана старейшим грибом, так их и не заберет в лучший мир.'); l_mainPl('Марья вынырнула из мира грез, осмотрела итог и довольно кивнула. Но радость длилась недолго: сумерки застали врасплох и вынуждали вернуться ни с чем. Стыдно теперь матушке на глаза попадаться, а еще больше — лгать, что грибов не нашла.'); a_addAct('Домой', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('нагоняй'); __PS_MV_REG = []; return; }); }); }; a_addAct('Собирать грибы', '', async function (l_g124) { a_clearAct(); l_mainClear(); if (_Globals['ANCIENT'][0] === 1) { l_goto('древние руины'); __PS_MV_REG = []; return; } else { l_mainPl('Что ж, в этом тоже есть своя прелесть, пока, конечно, ветви и прочие недружелюбные формы жизни не начнут объяснять, что чужакам здесь не рады.'); l_mainPl('Корзина собрана — пора домой.'); _Globals['ANCIENT'][0] = 1; }; a_addAct('Домой', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('дом'); __PS_MV_REG = []; return; }); }); if (_Globals['ANCIENT'][0] === 2) { a_addAct('Сходить в древние руины', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_mainPl('Не-е, лучше не надо.'); a_addAct('...', '', async function (l_g124) { a_clearAct(); l_mainClear(); l_goto('за грибами'); __PS_MV_REG = []; return; }); }); }; };
_Games['game']['НАЧАЛО'] = async function (l_g124) { l_mainPl('Где-то в далекой глуши, в одной деревеньке жила-была художница Марья. Жители восхищались ее искусством, однако она отмахивалась: мол, что они могут понимать? Не любила она свои работы: что-то с ними было не так, да и инструментов подходящих не было — всё старые, дедовские кисти. Вот были бы новые, достойные ее умения, тогда бы непременно всё получилось, и мир увидел бы шедевр.'); l_mainPl('Она настолько прониклась этой мыслью, что стала браться за любую работу, лишь бы скопить денег да купить достойные кисти: чтобы непременно были из загадочной заграницы и руки сами выводили картины. Грезы помогали ей справляться с тяжелой работой.'); l_mainPl('Однажды в деревню пожаловал купец со своим скарбом, {?}'); a_addAct('...', '', async function (l_g124) { l_goto('чужестранец'); __PS_MV_REG = []; return; }); };
_Games['game']['ЧУЖЕСТРАНЕЦ'] = async function (l_g124) { l_mainPl('Однажды в деревню пожаловал авантюрист, он же — фольклорист, как его тотчас нарекли жители. Интересовался всем подряд да в книжечку свою заносил.'); l_mainPl('И так бы он рано или поздно насытился местным бытом и отправился бы куда подальше, да только некоторые вдруг задумались: \"А че эта он сует нос куда попало?\" Застали как-то раз его в тишине ночной и решили проучить.'); l_mainPl('Но Марья заступилась за незнакомца и проучила обидчиков.'); l_mainPl('Молодой человек обрушился на нее с вопросами, что в особую минуту, она уже начала жалеть, что спасла его. Не прошло и минуты, как он прознал, что она в свободное время пишет картины.'); l_mainPl('Увязался он настолько крепко, что она чуть ли не сбежала от него в дом, а он все продолжал своим покажите, добрая сударыня, да покажите.'); l_mainPl('Пожилая матушка ухмылялась: мол, кавалер наконец-то объявился. И Марья уже начала откровенно проклинать этот день.'); l_mainPl('Закрылась у себя в комнате и начала осматривать свои бестолковые творения.'); l_mainPl('\"Что тут показывать?\" — глубоко вздохнула Марья и устало растянулась на кровати. Не то чтобы она собиралась показывать этому прохвосту, но мало ли. Ну воскликнет: \"Что за мазня?!\" — и будет прав. Деревенских-то удивить проще простого: кругозор ведь не велик, то ли дело удивлять повидавшего мир человека. Грр, да ну его!'); l_mainPl('А руки сами тянулись к злополучным кистям и пытались изобразить настырного человека. Хотелось подчеркнуть его назойливость...'); l_mainPl('Увлеклась настолько, что сон напрочь сморил, и она уснула прямо за столом'); l_mainPl('пока однажды не прознала про легендарные карандаши в далеких землях. Само собой, она тотчас бросилась их искать.'); a_addAct('...', '', async function (l_g124) { l_goto('путешествие'); __PS_MV_REG = []; return; }); };
_Games['game']['ПУТЕШЕСТВИЕ'] = async function (l_g124) { l_mainPl('Она продиралась сквозь зимнюю стужу, томилась под палящим солнцем пустыни, обретала друзей, теряла соратников, попадала в таинственные переплеты, пока наконец не достигла древнего места, где согласно легендам хранились легендарные карандаши.'); a_addAct('...', '', async function (l_g124) { l_goto('владелец реликвии'); __PS_MV_REG = []; return; }); };
_Games['game']['ВЛАДЕЛЕЦ РЕЛИКВИИ'] = async function (l_g124) { l_mainPl('— Ах, дом, милый дом'); a_addAct('...', '', async function (l_g124) { l_goto('битва за карандаши'); __PS_MV_REG = []; return; }); };
_Games['game']['БИТВА ЗА КАРАНДАШИ'] = async function (l_g124) { l_mainPl('Оставалось лишь руку протянуть до вожделенного плода, как перед ней возникло древнее зло и схватило карандаши. Битва продолжалась до самого заката, и наконец она смогла вырвать из его мертвых рук карандаши.'); a_addAct('...', '', async function (l_g124) { l_goto('нелегкий выбор'); __PS_MV_REG = []; return; }); };
_Games['game']['НЕЛЕГКИЙ ВЫБОР'] = async function (l_g124) { l_mainPl('Руки тряслись, сердце бешено колотилось после смертельного боя, но она все же нашла в себе силы: достала холст и изобразила арбуз в мягких тонах.'); a_addAct('...', '', async function (l_g124) { l_goto('эпилог'); __PS_MV_REG = []; return; }); };
_Games['game']['ЭПИЛОГ'] = async function (l_g124) { l_mainPl('<s>TODO</s> Конец!'); __PS_MV_REG = []; return; };